package com.tacohen.killbots.UI;

import java.util.Set;

import com.google.common.collect.HashMultimap;
import com.tacohen.cloud.Cloud;
import com.tacohen.killbots.R;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.util.Pair;
import android.widget.TextView;

public class HighScores extends Activity{
	
	HashMultimap<Integer, Pair<String,Integer>> scores = HashMultimap.create(2, 5);
	final static String TAG = "HighScores";
	private Context context;
	private final Handler myHandler = new Handler();
	
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.high_scores);
		
		this.context = getApplicationContext();
		
		GetHighScores();
		
	}
	
	public void GetHighScores(){
		  new Thread(new Runnable() {
 			@Override
 			public void run() {
 				Cloud c = new Cloud();
 				scores = c.getHighScores();
 				AccessUI();
 			}
 		}).start();
		
	}
	
	private void UpdateUI(){
		TextView nameText1 = (TextView) findViewById(R.id.nameText1);
		TextView scoreText1 = (TextView) findViewById(R.id.scoreText1);
		Set<Pair<String,Integer>> p = scores.get(1);
		Pair<String,Integer> pair1 = p.iterator().next();
		nameText1.setText(pair1.first);
		scoreText1.setText(pair1.second);
	}
	
	final Runnable updateRunnable = new Runnable() {
	       public void run() {
	           //call the activity method that updates the UI
	           UpdateUI();
	       }
	   };
	   
	   private void AccessUI()
	   {
	        //update the UI using the handler and the runnable
	        myHandler.post(updateRunnable);

	   }


}
